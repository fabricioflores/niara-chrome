{"version":3,"sources":["../scripts.babel/background.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,UAAA,OAAO,EAAI;AAChD,SAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC;CACzD,CAAC,CAAC;;AAEH,IAAI,aAAa,CAAC;AAClB,IAAI,QAAQ,CAAC;;AAEb,QAAQ,GAAG,UAAC,GAAG,EAAE,KAAK,EAAK;AACzB,MAAI,UAAU,GAAG,EAAE,CAAC;;AAEpB,MAAI,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,KAAM,GAAG,CAAC,MAAM,GAAC,CAAC,AAAC,EAAG;AAC5C,cAAU,GAAG,UAAU,GAAG,GAAG,CAAC;GAC/B;;AAED,MAAI,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;AAC3B,cAAU,GAAG,UAAU,GAAG,GAAG,CAAC;GAC/B;;AAED,YAAU,GAAG,UAAU,GAAG,gDAAgD,GAAG,KAAK,CAAC;AACnF,SAAO,UAAU,CAAC;CACnB,CAAC;;AAEF,aAAa,GAAG,UAAA,IAAI,EAAI;AACtB,MAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC;AAC/B,MAAI,WAAW,CAAC;;AAEhB,QAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CACtB,UAAU,CACX,EAAE,UAAS,KAAK,EAAE;AACjB,QAAI,KAAK,CAAC,QAAQ,EAAE;AAClB,iBAAW,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;AAC9C,YAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAC,GAAG,EAAE,WAAW,EAAC,CAAC,CAAC;KACxC,MAAI;AACH,YAAM,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;KAClC;GACF,CAAC,CAAC;CACJ,CAAC;AACA,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC;AACzB,OAAK,EAAE,sBAAsB;AAC7B,UAAQ,EAAC,CAAC,WAAW,CAAC;AACtB,SAAO,EAAE,aAAa;CACvB,CAAC,CAAC","file":"background.js","sourcesContent":["'use strict';\n\nchrome.runtime.onInstalled.addListener(details => {\n  console.log('previousVersion', details.previousVersion);\n});\n\nvar searchOnNiara;\nvar buildUrl;\n\nbuildUrl = (url, query) => {\n  var buildedUrl = '';\n\n  if (url.lastIndexOf('/') !== (url.length-1) ) {\n    buildedUrl = buildedUrl + '/';\n  }\n\n  if (url.indexOf('http') < 0) {\n    buildedUrl = 'https://' + url;\n  }\n  \n  buildedUrl = buildedUrl + '/#/integration/source:chrome-extension+entity:' + query;\n  return buildedUrl;\n};\n\nsearchOnNiara = word => {\n  var query = word.selectionText;\n  var endpointUrl;\n\n  chrome.storage.sync.get([\n    'niaraUrl'\n  ], function(items) {\n    if (items.niaraUrl) {\n      endpointUrl = buildUrl(items.niaraUrl, query);\n      chrome.tabs.create({url: endpointUrl});\n    }else{\n      chrome.runtime.openOptionsPage();\n    }\n  });\n};\n  chrome.contextMenus.create({\n    title: 'Search \"%s\" in Niara',\n    contexts:['selection'],\n    onclick: searchOnNiara,\n  });\n"]}